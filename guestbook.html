<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Baby V.O.X Guestbook</title>
<style>
/* Geocities-style body */
body {
  font-family: "Comic Sans MS", cursive, sans-serif;
  background: linear-gradient(135deg, #ffe6f0, #f8e1ff);
  color: #4B0082;
  margin: 0;
  padding: 0;
  text-align: center;
}

/* Spinning logo */
.spinning-logo {
  width: 150px;
  margin: 20px auto;
  animation: spin 6s linear infinite;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Container */
.container {
  width: 800px;
  margin: 0 auto 50px auto;
  background-color: #ffe6f0;
  border: 5px dashed #ff66cc;
  border-radius: 15px;
  padding: 20px;
}

/* Header */
h1 {
  color: #ff3399;
  text-shadow: 2px 2px #fff;
  font-size: 48px;
  margin-bottom: 25px;
}

/* Guestbook form */
form {
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Labels */
label {
  font-weight: bold;
  margin: 10px 0 5px 0;
  font-size: 18px;
}

/* Input fields */
input, textarea {
  width: 90%;
  padding: 8px;
  border: 3px dashed #ff66cc;
  border-radius: 10px;
  margin-bottom: 15px;
  font-family: "Comic Sans MS", cursive, sans-serif;
  font-size: 16px;
}

/* Submit button */
button {
  padding: 12px 25px;
  font-size: 18px;
  background: #ff66cc;
  color: white;
  border: 3px dashed #ff3399;
  border-radius: 12px;
  cursor: pointer;
  font-weight: bold;
  box-shadow: 0 0 10px #ff99cc;
  transition: 0.2s;
}

button:hover {
  box-shadow: 0 0 25px #ff99cc, 0 0 40px #ff66cc;
  transform: scale(1.05) rotate(-2deg);
}

button:active {
  transform: scale(0.95) rotate(5deg);
  box-shadow: 0 0 40px #ff66cc, 0 0 60px #ff99cc;
}

/* Messages container */
#messages {
  margin-top: 30px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.message-box {
  background-color: #fff0f8;
  border: 3px dashed #ff66cc;
  border-radius: 10px;
  width: 90%;
  padding: 10px;
  margin: 10px 0;
  text-align: left;
}

.message-box h3 {
  margin: 0 0 5px 0;
  font-size: 18px;
  color: #ff3399;
}

.message-box p {
  margin: 0;
  font-size: 16px;
}

/* Retro blinkies */
.blinkie-container img {
  width: 50px;
  height: 50px;
  margin: 5px;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 50%, 100% { opacity: 1; }
  25%, 75% { opacity: 0; }
}
</style>
</head>
<body>

<!-- Spinning Baby V.O.X Logo -->
<img src="babyvox.logo.2.svg" alt="Baby V.O.X Logo" class="spinning-logo">

<!-- Container -->
<div class="container">
  <h1>Guestbook</h1>
  <form id="guestbook-form">
    <label>Your Name:</label>
    <input type="text" name="fi-sender-firstName" placeholder="Type your name here" required>

    <label>Email (optional):</label>
    <input type="email" name="fi-sender-email" placeholder="Type your email">

    <label>Message:</label>
    <textarea name="fi-text-message" rows="6" placeholder="Write your message here..." required></textarea>

    <button type="submit">Sign Guestbook!</button>
  </form>

  <a href="index.html" class="back-home">‚Üê Back to Home</a>

  <!-- Messages -->
  <div id="messages">
    <h2>Messages from fans:</h2>
  </div>

  <!-- Retro blinkies -->
  <div class="blinkie-container">
    <img src="FCEE67FF-675A-48D7-8B20-00F20ABD0D56.gif" alt="blinkie">
    <img src="FCEE67FF-675A-48D7-8B20-00F20ABD0D56.gif" alt="blinkie">
    <img src="FCEE67FF-675A-48D7-8B20-00F20ABD0D56.gif" alt="blinkie">
  </div>
</div>

<!-- Include Forminit SDK -->
<script src="https://forminit.com/sdk/v1/forminit.js"></script>
<script>
  const forminit = new Forminit();
  const FORM_ID = "hhhskibxeqc";

  const form = document.getElementById("guestbook-form");
  const messagesContainer = document.getElementById("messages");

  // Submit new message
  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const { data, error } = await forminit.submit(FORM_ID, formData);

    if (error) {
      alert(error.message);
      return;
    }

    alert("Message sent successfully!");
    form.reset();
    loadMessages(); // Refresh messages after submitting
  });

  // Load messages from Forminit
  async function loadMessages() {
    messagesContainer.innerHTML = "<h2>Messages from fans:</h2>";
    try {
      const { data, error } = await forminit.getSubmissions(FORM_ID, { limit: 50 });
      if (error) throw new Error(error.message);

      data.forEach(msg => {
        const box = document.createElement("div");
        box.className = "message-box";

        const name = msg["fi-sender-firstName"] || "Anonymous";
        const email = msg["fi-sender-email"] || "";
        const message = msg["fi-text-message"] || "";

        box.innerHTML = `<h3>${name}${email ? " ("+email+")" : ""}</h3><p>${message}</p>`;
        messagesContainer.appendChild(box);
      });
    } catch (err) {
      console.error(err);
      messagesContainer.innerHTML += "<p>Unable to load messages at this time.</p>";
    }
  }

  // Load messages on page load
  loadMessages();
</script>

</body>
</html>
